---
import Button from "@/components/bearnie/button/Button.astro";
import { Moon, Sun } from "@lucide/astro";
import { cn } from "@/utils/cn";
const { animation } = Astro.props;
---

<!-- <div class="group cursor-pointer" data-theme-toggle> -->
<div class="theme-toggle inline-flex">
  <Button class="group" iconOnly variant="outline" size="lg">
    <div
      class={cn(
        "w-full h-full rounded-lg grid place-items-center",
        animation
          ? "group-active:scale-90  group-active:blur-[1px] group-active:translate-z-10 ease-out duration-100"
          : "",
      )}
    >
      <Sun
        class="col-start-1 row-start-1 transition-all duration-150 ease-[cubic-bezier(0.23,1,0.32,1)] rotate-0 scale-100 dark:-rotate-90 dark:scale-0"
      />
      <Moon
        class="col-start-1 row-start-1 transition-all duration-150 ease-[cubic-bezier(0.23,1,0.32,1)] rotate-90 scale-0 dark:rotate-0 dark:scale-100"
      />
    </div>
  </Button>
</div>
<!-- </div> -->

<script>
  function handleThemeToggle() {
    const themeToggles = document.querySelectorAll(".theme-toggle");
    const htmlElement = document.documentElement;

    themeToggles.forEach((toggle) => {
      toggle.addEventListener("click", () => {
        htmlElement.classList.toggle("dark");
        const isDark = htmlElement.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    });
  }

  handleThemeToggle();
  document.addEventListener("astro:after-swap", handleThemeToggle);
</script>
